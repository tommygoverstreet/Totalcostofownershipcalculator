<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO & META DATA -->
    <title>Fleet Profit Simulator | OKC Vehicle Sales</title>
    <meta name="description" content="Calculate commercial truck Total Cost of Ownership (TCO), ROI, and Net Profit. Free fleet analysis tool by Thomas Overstreet, OKC Vehicle Sales.">
    <meta name="author" content="Thomas Overstreet">
    
    <!-- Open Graph (Social Sharing) -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Truck Profitability Simulator - OKC Vehicle Sales">
    <meta property="og:description" content="Analyze maintenance risk, fuel costs, and driver pay to find your true trucking Net Profit.">
    <meta property="og:image" content="https://www.ryder.com/-/media/ryder/images/used-trucks/hero/hero_used-trucks_1200x600.jpg">

    <!-- FAVICON (Embedded SVG) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%232563eb%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><rect x=%221%22 y=%223%22 width=%2215%22 height=%2213%22></rect><polygon points=%2216 8 20 8 23 11 23 16 16 16 16 8%22></polygon><circle cx=%225.5%22 cy=%2218.5%22 r=%222.5%22></circle><circle cx=%2218.5%22 cy=%2218.5%22 r=%222.5%22></circle></svg>">

    <!-- JSON-LD STRUCTURED DATA -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "SoftwareApplication",
          "name": "OKC Fleet Profit Simulator",
          "applicationCategory": "BusinessApplication",
          "operatingSystem": "Web Browser",
          "author": {
            "@type": "Person",
            "name": "Thomas Overstreet",
            "jobTitle": "Vehicle Sales Manager",
            "worksFor": {
              "@type": "Organization",
              "name": "Ryder Vehicle Sales - OKC",
              "url": "https://www.ryder.com/en-us/used-trucks/inventory?facets=state:Oklahoma"
            }
          }
        }
      ]
    }
    </script>
    
    <!-- STABLE LIBRARIES -->
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <script src="https://unpkg.com/lucide@0.344.0/dist/umd/lucide.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!-- CUSTOM STYLES -->
    <style>
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
        
        .fade-in { animation: fadeIn 0.5s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f5f9; }

        /* Slider Styling */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 18px; width: 18px;
            border-radius: 50%; background: #ffffff;
            cursor: pointer; margin-top: -7px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3); transition: transform 0.1s;
        }
        input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.1); }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; cursor: pointer;
            background: #475569; border-radius: 2px;
        }

        /* FAQ Accordion */
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary ~ * { animation: sweep .3s ease-in-out; }
        @keyframes sweep { 0% {opacity: 0; transform: translateY(-5px)} 100% {opacity: 1; transform: translateY(0)} }

        /* Print Styles */
        @media print {
            body { background: white; color: black; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            .card { break-inside: avoid; border: 1px solid #ccc; box-shadow: none; margin-bottom: 20px; }
            @page { margin: 0.5cm; size: landscape; }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white shadow-xl sticky top-0 z-50 print:static">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="bg-blue-600 p-2 rounded-lg shadow-lg ring-1 ring-white/10">
                    <i data-lucide="truck" class="h-6 w-6 text-white"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold tracking-tight uppercase leading-none">OKC Vehicle Sales</h1>
                    <p class="text-xs text-blue-200 font-medium tracking-wide mt-1 hidden sm:block">Fleet Profitability Simulator</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-3 no-print">
                <button onclick="openModal()" aria-label="Contact Thomas" class="flex items-center space-x-2 bg-white/10 hover:bg-white/20 text-white px-3 py-2 rounded-md transition-all text-xs font-semibold backdrop-blur-sm border border-white/10">
                    <i data-lucide="user" class="h-3 w-3"></i> <span class="hidden md:inline">Contact Thomas</span>
                </button>
                <button onclick="resetApp()" aria-label="Reset Data" class="p-2 text-slate-300 hover:text-white transition-colors">
                    <i data-lucide="refresh-cw" class="h-4 w-4"></i>
                </button>
                <button onclick="window.print()" aria-label="Print Report" class="p-2 text-slate-300 hover:text-white transition-colors">
                    <i data-lucide="printer" class="h-4 w-4"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="flex-grow max-w-7xl mx-auto px-4 py-8 w-full">
        
        <!-- WELCOME BANNER -->
        <div id="welcome-banner" class="hidden mb-8 bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden flex-col md:flex-row no-print fade-in">
            <div class="bg-blue-600 p-8 flex flex-col justify-center items-center text-white md:w-1/3 text-center relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-600 to-blue-800"></div>
                <i data-lucide="calculator" class="h-16 w-16 mb-4 opacity-90 relative z-10"></i>
                <h2 class="text-2xl font-bold mb-2 relative z-10">Profit Simulator</h2>
                <p class="text-blue-100 text-sm relative z-10">Real-time TCO & ROI analysis.</p>
            </div>
            <div class="p-8 md:w-2/3 flex flex-col justify-center">
                <h3 class="text-xl font-bold text-slate-800 mb-3">Make Data-Driven Decisions</h3>
                <p class="text-slate-600 mb-6 text-sm leading-relaxed">
                    Don't just guess. Analyze the <strong>Total Cost of Ownership</strong>. Our engine accounts for maintenance risk blocks, insurance, fuel volatility, and driver pay to project your actual <strong>Net Profit</strong>.
                </p>
                <div class="flex flex-wrap gap-4 text-xs font-semibold text-slate-500 uppercase tracking-wider">
                    <div class="flex items-center"><i data-lucide="target" class="h-4 w-4 mr-1 text-green-500"></i> ROI Analysis</div>
                    <div class="flex items-center"><i data-lucide="shield" class="h-4 w-4 mr-1 text-blue-500"></i> Risk Blocks</div>
                    <div class="flex items-center"><i data-lucide="gauge" class="h-4 w-4 mr-1 text-orange-500"></i> Break-Even</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
            
            <!-- LEFT COLUMN: INPUTS -->
            <div class="xl:col-span-4 space-y-6 no-print">
                
                <!-- INPUT CARD -->
                <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden ring-1 ring-slate-900/5">
                    <div class="bg-slate-50 border-b border-slate-200 p-4 flex justify-between items-center">
                        <h3 class="font-bold text-slate-700 flex items-center">
                            <i data-lucide="plus" class="h-4 w-4 mr-2 text-blue-600"></i> Build Vehicle Profile
                        </h3>
                    </div>

                    <!-- Tabs -->
                    <div class="flex border-b border-slate-200 bg-white">
                        <button onclick="switchTab('vehicle')" id="tab-btn-vehicle" class="flex-1 py-3 text-xs font-bold uppercase tracking-wider border-b-2 border-blue-600 text-blue-600 bg-blue-50/50 transition-colors">Vehicle</button>
                        <button onclick="switchTab('ops')" id="tab-btn-ops" class="flex-1 py-3 text-xs font-bold uppercase tracking-wider border-b-2 border-transparent text-slate-500 hover:bg-slate-50 transition-colors">Operational</button>
                        <button onclick="switchTab('finance')" id="tab-btn-finance" class="flex-1 py-3 text-xs font-bold uppercase tracking-wider border-b-2 border-transparent text-slate-500 hover:bg-slate-50 transition-colors">Financial</button>
                    </div>

                    <form id="vehicle-form" onsubmit="addVehicle(event)" class="p-5 min-h-[420px] flex flex-col relative">
                        
                        <!-- Tab 1: Vehicle -->
                        <div id="tab-vehicle" class="space-y-4 fade-in">
                            <div class="space-y-3">
                                <label class="text-xs font-bold text-slate-500 uppercase">Class & Type</label>
                                <select id="input-class" onchange="updateMakes()" class="w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer"></select>
                                
                                <div class="grid grid-cols-2 gap-3">
                                    <select id="input-year" onchange="autoName()" class="p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm outline-none cursor-pointer"></select>
                                    <select id="input-make" onchange="updateModels()" class="p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm outline-none cursor-pointer">
                                        <option value="">Make...</option>
                                    </select>
                                </div>
                                
                                <select id="input-model" onchange="autoName()" disabled class="w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm disabled:opacity-50 outline-none cursor-pointer">
                                    <option value="">Model...</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-xs font-bold text-slate-500 uppercase">Unit Name</label>
                                <input type="text" id="input-name" placeholder="e.g. Unit #104" class="w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:border-blue-500 outline-none" required>
                            </div>
                        </div>

                        <!-- Tab 2: Ops -->
                        <div id="tab-ops" class="space-y-4 fade-in hidden">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase">Price ($)</label>
                                    <input type="number" id="input-price" value="75000" class="w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:border-blue-500 outline-none">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase">Odometer</label>
                                    <input type="number" id="input-miles" value="250000" class="w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:border-blue-500 outline-none bg-blue-50">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase">Avg MPG</label>
                                    <input type="number" step="0.1" id="input-mpg" value="7.2" class="w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:border-blue-500 outline-none">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase">Annual Miles</label>
                                    <input type="number" id="input-annual-miles" value="110000" class="w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:border-blue-500 outline-none">
                                </div>
                                <div class="col-span-2">
                                    <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 text-xs text-amber-800 flex items-start">
                                        <i data-lucide="alert-triangle" class="h-3 w-3 mr-2 mt-0.5 shrink-0"></i>
                                        <div>High mileage (>400k) triggers risk multipliers.</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tab 3: Finance -->
                        <div id="tab-finance" class="space-y-4 fade-in hidden">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase text-rose-600">Maint CPM ($)</label>
                                    <input type="number" step="0.01" id="input-maint-cpm" value="0.14" class="w-full p-2.5 border border-rose-200 rounded-lg text-sm focus:border-rose-500 outline-none">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase text-rose-600">Driver CPM ($)</label>
                                    <input type="number" step="0.01" id="input-driver-cpm" value="0.65" class="w-full p-2.5 border border-rose-200 rounded-lg text-sm focus:border-rose-500 outline-none">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase text-rose-600">Ins. $/Year</label>
                                    <input type="number" id="input-ins" value="9000" class="w-full p-2.5 border border-rose-200 rounded-lg text-sm focus:border-rose-500 outline-none">
                                </div>
                                <div>
                                    <label class="text-xs font-bold text-slate-500 uppercase text-rose-600">Misc $/Year</label>
                                    <input type="number" id="input-misc" value="2500" class="w-full p-2.5 border border-rose-200 rounded-lg text-sm focus:border-rose-500 outline-none">
                                </div>
                                <div class="col-span-2 pt-2 border-t border-slate-100">
                                    <label class="text-xs font-bold text-slate-500 uppercase text-green-600">Resale Value %</label>
                                    <input type="number" id="input-resale" value="25" class="w-full p-2.5 border border-green-200 rounded-lg text-sm focus:border-green-500 outline-none">
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="mt-auto pt-4">
                            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg shadow-lg shadow-blue-600/20 transition-all flex justify-center items-center group">
                                <i data-lucide="plus" class="h-5 w-5 mr-2 group-hover:scale-110 transition-transform"></i> Add to Fleet
                            </button>
                        </div>
                    </form>
                </div>

                <!-- MARKET SIMULATOR -->
                <div class="bg-slate-900 text-white rounded-xl shadow-lg p-5 relative overflow-hidden ring-1 ring-white/10">
                    <div class="absolute top-0 right-0 p-4 opacity-10"><i data-lucide="activity" class="h-24 w-24"></i></div>
                    <div class="flex justify-between items-center mb-4 relative z-10">
                        <h3 class="font-bold uppercase tracking-wider text-sm flex items-center">
                            <i data-lucide="target" class="h-4 w-4 mr-2 text-green-400"></i> Market Simulator
                        </h3>
                    </div>
                    
                    <div class="space-y-5 relative z-10">
                        <div>
                            <div class="flex justify-between text-xs font-medium text-slate-300 mb-1">
                                <span>Fuel Price ($/gal)</span>
                                <span class="text-white" id="display-fuel">$3.85</span>
                            </div>
                            <input type="range" id="slider-fuel" min="2.00" max="6.00" step="0.05" value="3.85" oninput="updateSettingsThrottled()" class="w-full accent-blue-500">
                        </div>

                        <div>
                            <div class="flex justify-between text-xs font-medium text-slate-300 mb-1">
                                <span>Est. Freight Rate ($/mi)</span>
                                <span class="text-green-400 font-bold" id="display-rate">$2.45</span>
                            </div>
                            <input type="range" id="slider-rate" min="1.00" max="4.00" step="0.05" value="2.45" oninput="updateSettingsThrottled()" class="w-full accent-green-500">
                        </div>

                        <div>
                            <label class="text-xs text-slate-400 block mb-1">Ownership Term (Years)</label>
                            <div class="flex space-x-2" id="term-buttons">
                                <!-- Generated via JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: RESULTS -->
            <div class="xl:col-span-8 space-y-6">
                
                <!-- RESULTS GRID -->
                <div id="results-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Cards injected via JS -->
                </div>

                <!-- DETAILED TABLE -->
                <div id="results-table-container" class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden hidden">
                    <div class="bg-slate-50 p-4 border-b border-slate-200 flex justify-between items-center">
                        <h3 class="font-bold text-slate-700 text-sm uppercase tracking-wide">Financial Breakdown</h3>
                        <span class="text-xs text-slate-400 hidden sm:inline">Net Profit Estimate</span>
                    </div>
                    <div class="overflow-x-auto custom-scroll">
                        <table class="w-full text-left text-sm">
                            <thead>
                                <tr class="bg-slate-50 border-b border-slate-200 text-xs text-slate-500 uppercase tracking-wider">
                                    <th class="p-3 font-semibold">Vehicle</th>
                                    <th class="p-3 font-semibold text-right">Fuel</th>
                                    <th class="p-3 font-semibold text-right">Maint.</th>
                                    <th class="p-3 font-semibold text-right">Driver</th>
                                    <th class="p-3 font-semibold text-right bg-slate-100">Op. Cost</th>
                                    <th class="p-3 font-semibold text-right text-green-700 bg-green-50">Net Profit</th>
                                </tr>
                            </thead>
                            <tbody id="results-table-body" class="divide-y divide-slate-100">
                                <!-- Rows injected via JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>

        <!-- FAQ SECTION -->
        <section class="mt-16 max-w-4xl mx-auto space-y-8 no-print fade-in">
            <div class="text-center">
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Frequently Asked Questions</h2>
                <p class="text-slate-600 text-sm">Common questions about fleet profitability.</p>
            </div>
            
            <div class="space-y-4">
                <details class="group bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <summary class="flex justify-between items-center p-5 cursor-pointer bg-slate-50/50 hover:bg-slate-50 transition-colors">
                        <span class="font-bold text-slate-700">How is Maintenance Cost calculated?</span>
                        <span class="transform group-open:rotate-180 transition-transform duration-200"><i data-lucide="chevron-down" class="h-5 w-5 text-slate-400"></i></span>
                    </summary>
                    <div class="p-5 pt-0 text-slate-600 text-sm leading-relaxed border-t border-slate-100">
                        <p class="mt-4">We use <strong>Risk Block Logic</strong>. Maintenance isn't flat; it increases as trucks age. Our calculator applies multipliers based on odometer reading:</p>
                        <ul class="list-disc pl-5 mt-2 space-y-1">
                            <li><strong>0 - 100k Miles:</strong> Base Rate (Warranty)</li>
                            <li><strong>100k - 250k Miles:</strong> 1.15x (Tires, Brakes)</li>
                            <li><strong>250k - 400k Miles:</strong> 1.35x (Sensors, DPF)</li>
                            <li><strong>400k - 550k Miles:</strong> 1.60x (Injectors, Turbo)</li>
                            <li><strong>550k+ Miles:</strong> 2.00x (Engine Risk)</li>
                        </ul>
                    </div>
                </details>

                <details class="group bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <summary class="flex justify-between items-center p-5 cursor-pointer bg-slate-50/50 hover:bg-slate-50 transition-colors">
                        <span class="font-bold text-slate-700">What is the Break-Even Rate?</span>
                        <span class="transform group-open:rotate-180 transition-transform duration-200"><i data-lucide="chevron-down" class="h-5 w-5 text-slate-400"></i></span>
                    </summary>
                    <div class="p-5 pt-0 text-slate-600 text-sm leading-relaxed border-t border-slate-100">
                        <p class="mt-4">The <strong>Break-Even Rate</strong> is the exact dollar amount per mile you need to charge to cover <em>all expenses</em> (Fuel + Driver + Maintenance + Insurance + Truck Payment) without making a profit or a loss.</p>
                    </div>
                </details>

                <details class="group bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <summary class="flex justify-between items-center p-5 cursor-pointer bg-slate-50/50 hover:bg-slate-50 transition-colors">
                        <span class="font-bold text-slate-700">Financing in Oklahoma City?</span>
                        <span class="transform group-open:rotate-180 transition-transform duration-200"><i data-lucide="chevron-down" class="h-5 w-5 text-slate-400"></i></span>
                    </summary>
                    <div class="p-5 pt-0 text-slate-600 text-sm leading-relaxed border-t border-slate-100">
                        <p class="mt-4">At <strong>Ryder Vehicle Sales OKC</strong>, we offer multiple financing options. Contact Thomas Overstreet at <a href="tel:405-592-4292" class="text-blue-600 font-bold hover:underline">405-592-4292</a> to discuss down payments and interest rate options.</p>
                    </div>
                </details>
            </div>
        </section>

        <!-- PRINT FOOTER -->
        <div class="hidden print:block mt-8 pt-8 border-t border-slate-300 text-center text-sm text-slate-500">
            <h2 class="text-xl font-bold text-slate-900">OKC Vehicle Sales</h2>
            <p>15 S. Morgan Rd, Oklahoma City, Oklahoma 73128</p>
            <p>Thomas Overstreet: 405-592-4292 | thomas_overstreet@ryder.com</p>
            <p class="mt-4 text-xs italic">
                *Disclaimer: Projections include estimated maintenance escalation based on odometer readings. Driver costs included.
            </p>
        </div>
    </main>

    <!-- FOOTER (Web Only) -->
    <footer class="bg-slate-900 text-slate-400 py-12 mt-16 no-print">
        <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-sm">
            <div>
                <h4 class="text-white font-bold mb-4 uppercase tracking-wider">About OKC Vehicle Sales</h4>
                <p class="mb-4">Helping fleet owners make data-driven decisions. Quality used commercial vehicles including Freightliner, Volvo, and International trucks.</p>
                <div class="flex space-x-3">
                    <a href="https://youtube.com/@okcusedtrucks?si=qKLIrpyIOvhWukaC" target="_blank" class="hover:text-white transition-colors"><i data-lucide="youtube" class="h-5 w-5"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=61572268059318" target="_blank" class="hover:text-white transition-colors"><i data-lucide="facebook" class="h-5 w-5"></i></a>
                    <a href="https://www.linkedin.com/in/thomas-overstreet-1117444b" target="_blank" class="hover:text-white transition-colors"><i data-lucide="linkedin" class="h-5 w-5"></i></a>
                </div>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4 uppercase tracking-wider">Contact</h4>
                <ul class="space-y-2">
                    <li class="flex items-start"><i data-lucide="map-pin" class="h-4 w-4 mr-2 mt-1"></i> 15 S. Morgan Rd, OKC, OK 73128</li>
                    <li class="flex items-center"><i data-lucide="phone" class="h-4 w-4 mr-2"></i> <a href="tel:4055924292" class="hover:text-white">405-592-4292</a></li>
                    <li class="flex items-center"><i data-lucide="mail" class="h-4 w-4 mr-2"></i> <a href="mailto:thomas_overstreet@ryder.com" class="hover:text-white">thomas_overstreet@ryder.com</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-bold mb-4 uppercase tracking-wider">Inventory</h4>
                <p class="mb-3">Looking for a specific Class 8 or Medium Duty truck?</p>
                <a href="https://www.ryder.com/en-us/used-trucks/inventory?facets=state:Oklahoma&frompage=1&pagesize=42" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-bold transition-colors">
                    View Current Inventory
                </a>
            </div>
        </div>
        <!-- DYNAMIC COPYRIGHT YEAR -->
        <div class="max-w-7xl mx-auto px-4 mt-8 pt-8 border-t border-slate-800 text-center text-xs">
            &copy; <span id="current-year"></span> OKC Vehicle Sales. All rights reserved.
        </div>
    </footer>

    <!-- CONTACT MODAL -->
    <div id="contact-modal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm no-print" onclick="closeModal()">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full overflow-hidden transform scale-95 transition-all duration-200" onclick="event.stopPropagation()">
            <div class="bg-gradient-to-br from-slate-900 to-slate-800 p-6 text-white relative">
                <button onclick="closeModal()" aria-label="Close" class="absolute top-4 right-4 text-white/50 hover:text-white"><i data-lucide="x" class="h-5 w-5"></i></button>
                <div class="flex flex-col items-center text-center">
                    <div class="h-20 w-20 bg-blue-600 rounded-full flex items-center justify-center text-2xl font-bold mb-3 border-4 border-slate-800 shadow-xl">TO</div>
                    <h2 class="text-xl font-bold">Thomas Overstreet</h2>
                    <p class="text-blue-200 text-sm font-medium">OKC Vehicle Sales</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <a href="tel:405-592-4292" class="flex items-center p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors"><i data-lucide="phone" class="h-5 w-5 text-green-600 mr-3"></i> <span class="text-sm font-bold text-slate-700">405-592-4292</span></a>
                <a href="mailto:thomas_overstreet@ryder.com" class="flex items-center p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors"><i data-lucide="mail" class="h-5 w-5 text-blue-600 mr-3"></i> <span class="text-sm font-bold text-slate-700 truncate">thomas_overstreet@ryder.com</span></a>
                <div class="flex items-center p-3 rounded-lg bg-slate-50"><i data-lucide="map-pin" class="h-5 w-5 text-red-600 mr-3"></i> <span class="text-sm font-bold text-slate-700">15 S. Morgan Rd, OKC</span></div>
                
                <div class="grid grid-cols-3 gap-2 pt-2">
                    <a href="https://youtube.com/@okcusedtrucks?si=qKLIrpyIOvhWukaC" target="_blank" class="flex items-center justify-center p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors"><i data-lucide="youtube" class="h-5 w-5 text-red-600"></i></a>
                    <a href="https://www.facebook.com/profile.php?id=61572268059318" target="_blank" class="flex items-center justify-center p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors"><i data-lucide="facebook" class="h-5 w-5 text-blue-600"></i></a>
                    <a href="https://www.linkedin.com/in/thomas-overstreet-1117444b" target="_blank" class="flex items-center justify-center p-3 rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors"><i data-lucide="linkedin" class="h-5 w-5 text-blue-700"></i></a>
                </div>
                
                <div class="text-center pt-2">
                    <a href="https://www.ryder.com/en-us/used-trucks/inventory?facets=state:Oklahoma&frompage=1&pagesize=42" target="_blank" class="text-xs font-bold text-blue-600 hover:underline">View Inventory</a>
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA CONFIG ---
        const TRUCK_DATA = {
            classes: ["Class 8 (Heavy Duty)", "Class 6/7 (Medium Duty)", "Class 4/5 (Light Duty)"],
            years: Array.from({ length: 15 }, (_, i) => (new Date().getFullYear() + 1 - i).toString()),
            makes: {
                "Class 8 (Heavy Duty)": ["Freightliner", "Volvo", "International", "Kenworth", "Peterbilt", "Mack", "Western Star"],
                "Class 6/7 (Medium Duty)": ["Freightliner", "International", "Hino", "Isuzu", "Ford", "Kenworth", "Peterbilt"],
                "Class 4/5 (Light Duty)": ["Isuzu", "Hino", "Ford", "Ram", "Chevrolet"]
            },
            models: {
                "Freightliner": {
                    "Class 8 (Heavy Duty)": ["Cascadia 126", "Cascadia 116", "Cascadia Evolution", "122SD"],
                    "Class 6/7 (Medium Duty)": ["M2 106", "M2 112"],
                },
                "Volvo": { "Class 8 (Heavy Duty)": ["VNL 860", "VNL 760", "VNL 740", "VNR 640", "VHD"] },
                "International": {
                    "Class 8 (Heavy Duty)": ["LT625", "RH Series", "LoneStar", "ProStar"],
                    "Class 6/7 (Medium Duty)": ["MV607", "MV Series", "Durastar"],
                },
                "Kenworth": {
                    "Class 8 (Heavy Duty)": ["T680", "T680 Next Gen", "W990", "T880"],
                    "Class 6/7 (Medium Duty)": ["T270", "T370", "T280"],
                },
                "Peterbilt": {
                    "Class 8 (Heavy Duty)": ["579", "579 UltraLoft", "389", "567"],
                    "Class 6/7 (Medium Duty)": ["536", "537", "337", "348"],
                },
                "Mack": { "Class 8 (Heavy Duty)": ["Anthem", "Pinnacle", "Granite"] },
                "Hino": { "Class 6/7 (Medium Duty)": ["L Series", "XL Series", "268", "338"] },
                "Isuzu": { "Class 6/7 (Medium Duty)": ["FTR", "FVR"], "Class 4/5 (Light Duty)": ["NQR", "NRr", "NPR-HD"] }
            }
        };

        const defaultSettings = {
            fuelPrice: 3.85,
            marketFreightRate: 2.45,
            ownershipYears: 4,
            blockMultipliers: { base: 1.0, tier1: 1.15, tier2: 1.35, tier3: 1.60, tier4: 2.00 }
        };

        // --- STATE & ELEMENTS ---
        let vehicles = JSON.parse(localStorage.getItem('okc_vehicles_v5')) || [];
        let globalSettings = JSON.parse(localStorage.getItem('okc_settings_v5')) || defaultSettings;
        let isRendering = false;

        const els = {
            class: document.getElementById('input-class'),
            year: document.getElementById('input-year'),
            make: document.getElementById('input-make'),
            model: document.getElementById('input-model'),
            name: document.getElementById('input-name'),
            fuel: document.getElementById('slider-fuel'),
            rate: document.getElementById('slider-rate'),
            termContainer: document.getElementById('term-buttons'),
            displayFuel: document.getElementById('display-fuel'),
            displayRate: document.getElementById('display-rate'),
            resultsGrid: document.getElementById('results-grid'),
            resultsTableBody: document.getElementById('results-table-body'),
            resultsTableContainer: document.getElementById('results-table-container'),
            welcomeBanner: document.getElementById('welcome-banner'),
            contactModal: document.getElementById('contact-modal')
        };

        // --- CORE FUNCTIONS ---
        function init() {
            try {
                if(window.lucide) lucide.createIcons();
                populateDropdowns();
                renderSettings();
                render();
                els.fuel.value = globalSettings.fuelPrice;
                els.rate.value = globalSettings.marketFreightRate;
                
                // Keyboard A11y
                document.addEventListener('keydown', (e) => {
                    if (e.key === "Escape") closeModal();
                });

                // Update Copyright Year Automatically
                document.getElementById('current-year').textContent = new Date().getFullYear();

            } catch (e) {
                console.error("Init failed:", e);
            }
        }

        function populateDropdowns() {
            els.class.innerHTML = TRUCK_DATA.classes.map(c => `<option value="${c}">${c}</option>`).join('');
            els.year.innerHTML = TRUCK_DATA.years.map(y => `<option value="${y}">${y}</option>`).join('');
            updateMakes();
        }

        function updateMakes() {
            const selectedClass = els.class.value;
            const makes = TRUCK_DATA.makes[selectedClass] || [];
            els.make.innerHTML = '<option value="">Make...</option>' + makes.map(m => `<option value="${m}">${m}</option>`).join('');
            els.model.innerHTML = '<option value="">Model...</option>';
            els.model.disabled = true;
        }

        function updateModels() {
            const selectedMake = els.make.value;
            const selectedClass = els.class.value;
            if (!selectedMake) {
                els.model.innerHTML = '<option value="">Model...</option>';
                els.model.disabled = true;
                return;
            }
            
            let models = [];
            const makeData = TRUCK_DATA.models[selectedMake];
            
            if (makeData) {
                if (Array.isArray(makeData)) {
                    models = makeData;
                } else if (makeData[selectedClass]) {
                    models = makeData[selectedClass];
                }
            }

            els.model.innerHTML = '<option value="">Model...</option>' + models.map(m => `<option value="${m}">${m}</option>`).join('');
            els.model.disabled = false;
            autoName();
        }

        function autoName() {
            if (els.make.value && els.model.value) {
                els.name.value = `${els.year.value} ${els.make.value} ${els.model.value}`;
            }
        }

        function switchTab(tabName) {
            ['vehicle', 'ops', 'finance'].forEach(t => {
                document.getElementById(`tab-${t}`).classList.add('hidden');
                document.getElementById(`tab-btn-${t}`).className = "flex-1 py-3 text-xs font-bold uppercase tracking-wider border-b-2 border-transparent text-slate-500 hover:bg-slate-50 transition-colors";
            });
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
            document.getElementById(`tab-btn-${tabName}`).className = "flex-1 py-3 text-xs font-bold uppercase tracking-wider border-b-2 border-blue-600 text-blue-600 bg-blue-50/50 transition-colors";
        }

        // --- PERFORMANCE THROTTLING ---
        function updateSettingsThrottled() {
            if (!isRendering) {
                requestAnimationFrame(() => {
                    globalSettings.fuelPrice = parseFloat(els.fuel.value);
                    globalSettings.marketFreightRate = parseFloat(els.rate.value);
                    saveState();
                    renderSettings();
                    render();
                    isRendering = false;
                });
                isRendering = true;
            }
        }

        function setTerm(years) {
            globalSettings.ownershipYears = years;
            saveState();
            renderSettings();
            render();
        }

        function renderSettings() {
            els.displayFuel.innerText = formatCurrency(globalSettings.fuelPrice);
            els.displayRate.innerText = formatCurrency(globalSettings.marketFreightRate);
            els.termContainer.innerHTML = [3,4,5,6].map(y => `
                <button onclick="setTerm(${y})" class="flex-1 py-1 rounded text-xs font-bold border transition-colors ${globalSettings.ownershipYears === y ? 'bg-white text-slate-900 border-white' : 'border-slate-700 text-slate-400 hover:border-slate-500'}">
                    ${y} Yrs
                </button>
            `).join('');
        }

        // --- LOGIC ENGINE ---
        function getMaintMultiplier(odometer) {
            const bm = globalSettings.blockMultipliers;
            if (odometer < 100000) return bm.base;
            if (odometer < 250000) return bm.tier1;
            if (odometer < 400000) return bm.tier2;
            if (odometer < 550000) return bm.tier3;
            return bm.tier4;
        }

        function calculateFinancials(vehicle) {
            const { price, currentMiles, mpg, annualMiles, maintCostPerMile, insurancePerYear, otherAnnualCosts, driverCostPerMile, residualValuePercent } = vehicle;
            const { ownershipYears, fuelPrice, marketFreightRate } = globalSettings;

            let totalFuel = 0, totalMaint = 0, totalFixed = 0, totalDriver = 0, totalRevenue = 0;

            for (let year = 1; year <= ownershipYears; year++) {
                const startOdo = currentMiles + (annualMiles * (year - 1));
                const endOdo = currentMiles + (annualMiles * year);
                const avgOdo = (startOdo + endOdo) / 2;

                const yearFuel = (annualMiles / mpg) * fuelPrice;
                const yearFixed = insurancePerYear + otherAnnualCosts;
                const yearDriver = annualMiles * driverCostPerMile;
                const maintMult = getMaintMultiplier(avgOdo);
                const yearMaint = annualMiles * (maintCostPerMile * maintMult);

                totalFuel += yearFuel;
                totalMaint += yearMaint;
                totalFixed += yearFixed;
                totalDriver += yearDriver;
                totalRevenue += (annualMiles * marketFreightRate);
            }

            const residualValue = price * (residualValuePercent / 100);
            const depreciation = price - residualValue;
            const totalOperatingCost = totalFuel + totalMaint + totalFixed + totalDriver + depreciation;
            const netProfit = totalRevenue - totalOperatingCost;
            
            const totalMiles = annualMiles * ownershipYears;
            const costPerMile = totalOperatingCost / totalMiles;
            const breakEvenRate = costPerMile;
            const operatingMargin = (netProfit / totalRevenue) * 100;
            const roi = (netProfit / price) * 100;

            return { ...vehicle, totalOperatingCost, netProfit, costPerMile, breakEvenRate, operatingMargin, roi, totalFuel, totalMaint, totalFixed, totalDriver };
        }

        function render() {
            if (vehicles.length === 0) {
                els.welcomeBanner.classList.remove('hidden');
                els.welcomeBanner.classList.add('flex');
                els.resultsTableContainer.classList.add('hidden');
                els.resultsGrid.innerHTML = '';
                return;
            }

            els.welcomeBanner.classList.add('hidden');
            els.welcomeBanner.classList.remove('flex');
            els.resultsTableContainer.classList.remove('hidden');

            const results = vehicles.map(calculateFinancials);
            const winnerId = results.length ? results.reduce((prev, curr) => prev.netProfit > curr.netProfit ? prev : curr).id : null;

            els.resultsGrid.innerHTML = results.map(r => `
                <div class="card relative bg-white rounded-xl border-2 transition-all duration-300 group ${winnerId === r.id ? 'border-green-500 shadow-xl shadow-green-900/5' : 'border-slate-200 hover:border-blue-300 shadow-sm'}">
                    <div class="p-4 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 rounded-t-xl">
                        <div class="flex items-center">
                            <div class="h-10 w-10 rounded-full flex items-center justify-center mr-3 text-white shadow-md ${winnerId === r.id ? 'bg-gradient-to-br from-green-500 to-emerald-600' : 'bg-gradient-to-br from-slate-700 to-slate-800'}">
                                <i data-lucide="truck" class="h-5 w-5"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-800 text-sm leading-tight">${r.name}</h4>
                                <div class="text-[10px] text-slate-500 font-mono mt-0.5">Start: ${formatNumber(r.currentMiles)} mi</div>
                            </div>
                        </div>
                        <button onclick="removeVehicle(${r.id})" aria-label="Remove" class="text-slate-300 hover:text-red-500 transition-colors"><i data-lucide="x" class="h-4 w-4"></i></button>
                    </div>
                    
                    <div class="p-4 grid grid-cols-2 gap-4">
                        <div class="space-y-1">
                            <div class="text-[10px] uppercase text-slate-400 font-bold">Net Profit (${globalSettings.ownershipYears}yr)</div>
                            <div class="text-xl font-bold tracking-tight ${r.netProfit > 0 ? 'text-green-600' : 'text-red-600'}">
                                ${formatCurrency(r.netProfit)}
                            </div>
                            <div class="flex items-center text-[10px] font-medium text-slate-500">
                                <span class="${r.roi > 0 ? "text-green-600" : "text-red-500"}">${r.roi.toFixed(1)}% ROI</span>
                                <span class="mx-1">â€¢</span>
                                <span>${r.operatingMargin.toFixed(1)}% Margin</span>
                            </div>
                        </div>
                        <div class="space-y-1 text-right">
                            <div class="text-[10px] uppercase text-slate-400 font-bold">Total CPM</div>
                            <div class="text-xl font-bold text-slate-800 font-mono">$${r.costPerMile.toFixed(2)}</div>
                            <div class="text-[10px] text-orange-600 font-medium">Break-Even: $${r.breakEvenRate.toFixed(2)}</div>
                        </div>
                    </div>

                    <div class="px-4 pb-4">
                        <div class="flex justify-between text-[10px] mb-1 font-medium text-slate-500"><span>Cost</span><span>Profit</span></div>
                        <div class="h-2 w-full bg-slate-100 rounded-full overflow-hidden flex">
                            <div style="width: ${Math.max(0, 100 - r.operatingMargin)}%" class="bg-rose-400 h-full"></div>
                            <div style="width: ${Math.max(0, r.operatingMargin)}%" class="bg-emerald-500 h-full"></div>
                        </div>
                    </div>
                </div>
            `).join('');

            els.resultsTableBody.innerHTML = results.map(r => `
                <tr class="hover:bg-slate-50">
                    <td class="p-3 font-bold text-slate-700">${r.name}</td>
                    <td class="p-3 text-right font-mono text-slate-600">${formatCompact(r.totalFuel)}</td>
                    <td class="p-3 text-right font-mono text-orange-600 font-medium">${formatCompact(r.totalMaint)}</td>
                    <td class="p-3 text-right font-mono text-slate-600">${formatCompact(r.totalDriver)}</td>
                    <td class="p-3 text-right font-mono font-bold text-slate-800 bg-slate-50">${formatCompact(r.totalOperatingCost)}</td>
                    <td class="p-3 text-right font-mono font-bold bg-green-50 ${r.netProfit > 0 ? 'text-green-700' : 'text-red-600'}">${formatCurrency(r.netProfit)}</td>
                </tr>
            `).join('');

            if(window.lucide) lucide.createIcons();
        }

        function addVehicle(e) {
            e.preventDefault();
            if (vehicles.length >= 4) { alert("Max 4 vehicles allowed."); return; }
            
            const newVehicle = {
                id: Date.now(),
                name: els.name.value,
                price: parseFloat(document.getElementById('input-price').value),
                currentMiles: parseFloat(document.getElementById('input-miles').value),
                mpg: parseFloat(document.getElementById('input-mpg').value),
                annualMiles: parseFloat(document.getElementById('input-annual-miles').value),
                maintCostPerMile: parseFloat(document.getElementById('input-maint-cpm').value),
                insurancePerYear: parseFloat(document.getElementById('input-ins').value),
                otherAnnualCosts: parseFloat(document.getElementById('input-misc').value),
                driverCostPerMile: parseFloat(document.getElementById('input-driver-cpm').value),
                residualValuePercent: parseFloat(document.getElementById('input-resale').value),
            };

            vehicles.push(newVehicle);
            saveState();
            render();
            els.name.value = "";
        }

        function removeVehicle(id) {
            vehicles = vehicles.filter(v => v.id !== id);
            saveState();
            render();
        }

        function resetApp() {
            if(confirm("Reset all data?")) {
                vehicles = [];
                globalSettings = defaultSettings;
                saveState();
                location.reload();
            }
        }

        function saveState() {
            localStorage.setItem('okc_vehicles_v5', JSON.stringify(vehicles));
            localStorage.setItem('okc_settings_v5', JSON.stringify(globalSettings));
        }

        // Modals
        function openModal() { els.contactModal.classList.remove('hidden'); }
        function closeModal() { els.contactModal.classList.add('hidden'); }

        // Formatters
        const formatCurrency = (v) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(v);
        const formatCompact = (v) => new Intl.NumberFormat('en-US', { notation: "compact", compactDisplay: "short", maximumFractionDigits: 1 }).format(v);
        const formatNumber = (v) => new Intl.NumberFormat('en-US').format(v);

        init();
    </script>
</body>
</html>


